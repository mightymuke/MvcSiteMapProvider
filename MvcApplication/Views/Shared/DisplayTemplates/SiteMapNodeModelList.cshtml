@model MvcSiteMapProvider.Web.Html.Models.SiteMapNodeModelList
@using System.Web.Mvc.Html
@using MvcSiteMapProvider.Web.Html.Models

<ul>
    @foreach (var node in Model) {
        if (node.IsCurrentNode)
        {
            <li>@Html.DisplayFor(m => node) 
                @foreach (var child in node.Children)
                {
                    @Html.DisplayFor(m => child);
                }
            </li>
        }
        else if (node.IsInCurrentPath)
        {
            <li>@Html.DisplayFor(m => node) 
                @if (node.Children.Any())
                {
                    @Html.DisplayFor(m => node.Children)
                }
            </li>
        }
    }
</ul>